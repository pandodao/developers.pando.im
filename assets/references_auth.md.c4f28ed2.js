import{_ as s,o as n,c as a,a as o}from"./app.f0be1cef.js";const C=JSON.parse('{"title":"Authorization","description":"","frontmatter":{},"headers":[],"relativePath":"references/auth.md"}'),l={name:"references/auth.md"},p=o(`<h1 id="authorization" tabindex="-1">Authorization <a class="header-anchor" href="#authorization" aria-hidden="true">#</a></h1><p>Although most APIs are public, some APIs require authentication. You need to provide an access token to call them.</p><p>Usually, you can use the a regular Mixin Access Token for <code>GET https://api.mixin.one/me</code> with scope <code>&quot;FULL&quot;</code>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The access token should be signed and generate by <strong>Your Own Mixn Application</strong>.</p></div><p>Generate the access token by using <code>mixin-cli</code> is pretty easy:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mixin-cli</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./keystore.json</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sign</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/me</span></span>
<span class="line"></span></code></pre></div><p><code>mixin-cli</code> will output the access token, you can use it to call the protected APIs:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sign</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">GET</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/me</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">with</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">request</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">e98b1200-xxxx-xxxx-xxxx-xxxxxxxxxxxx</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">exp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">10m0s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">eyJhbGciOiJFZER.</span><span style="color:#82AAFF;">..</span><span style="color:#FFCB6B;">.jTtecIBiQo4OrJ7q7Ag</span></span>
<span class="line"></span></code></pre></div><p>But in a real project, using SDKs to generate the access token is recommended. For example, if you&#39;re using the <a href="https://github.com/fox-one/mixin-sdk-go" target="_blank" rel="noreferrer">mixin-sdk-go</a> or <a href="https://github.com/fox-one/fe-tools-mixin/blob/main/packages/api/README.md" target="_blank" rel="noreferrer">@foxone/mixin-api</a>, you can use the following code to generate the access token:</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-tFg4V" id="tab-0A8093H" checked="checked"><label for="tab-0A8093H">Go</label><input type="radio" name="group-tFg4V" id="tab-yftFfqI"><label for="tab-yftFfqI">Typescript</label></div><div class="blocks"><div class="language-go active"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">github.com/fox-one/mixin-sdk-go</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#676E95;font-style:italic;">// open the keystore file and decode it</span></span>
<span class="line"><span style="color:#A6ACCD;">	f</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Open</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./keystore.json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Panicln</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> keystore mixin</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Keystore</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> json</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewDecoder</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">f</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Decode</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">keystore</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Panicln</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	_ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> f</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Close</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	auth</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> mixin</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">AuthFromKeystore</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">keystore</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Panicln</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#676E95;font-style:italic;">// generate signature for GET /me</span></span>
<span class="line"><span style="color:#A6ACCD;">	sig </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> mixin</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">SignRaw</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/me</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">nil)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#676E95;font-style:italic;">// generate an access token, it will be expired in 10 minutes</span></span>
<span class="line"><span style="color:#A6ACCD;">	token </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> auth</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">SignToken</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">sig</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> mixin</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">RandomTraceID</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Minute</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">10d</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">access token:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> token</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">signAuthenticationToken</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@foxone/mixin-api/encrypt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> keys </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">client_id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">session_id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">private_key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">signAuthenticationToken</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  keys</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">client_id</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  keys</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">session_id</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  keys</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">private_key</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/me</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div></div></div><p>To validate your access token, use the API to retrieve transactions for the pairs BTC/ETH in 4swap</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-X</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">GET</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://api.4swap.org/api/transactions/c6d0c728-2624-429b-8e0d-d9d19b6592fa/43d61dcd-e413-450d-80b8-101d5e903357/mine</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-H</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">accept: application/json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">--header </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Authorization: Bearer YOUR_ACCESS_TOKEN_HERE</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><details class="details custom-block"><summary>Looking for other SDKs?</summary><p>There are some SDKs available for different languages, you can find them in <a href="https://developers.mixin.one/docs/resources/sdk" target="_blank" rel="noreferrer">this page</a>.</p><p>Pando Dev Team is the main maintainer of the <a href="https://github.com/fox-one/mixin-sdk-go" target="_blank" rel="noreferrer">mixin-sdk-go</a> (for Golang) and <a href="https://github.com/fox-one/fe-tools-mixin/blob/main/packages/api/README.md" target="_blank" rel="noreferrer">@foxone/mixin-api</a> (for Typescript). We recommend you to use them.</p></details><p>If you want to know the details of generating access token, please visit <a href="https://developers.mixin.one/docs/api/guide#signing" target="_blank" rel="noreferrer">this document</a>.</p>`,14),e=[p];function t(c,r,D,y,i,F){return n(),a("div",null,e)}const d=s(l,[["render",t]]);export{C as __pageData,d as default};
